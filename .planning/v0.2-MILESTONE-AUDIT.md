---
milestone: v0.2
audited: 2026-02-25T08:00:00Z
status: tech_debt
scores:
  requirements: 27/27
  phases: 4/4
  integration: 24/27
  flows: 5/6
gaps:
  requirements: []
  integration:
    - id: "AUTH-01"
      issue: "Logout action exported but no UI consumer in template"
      severity: "non-critical"
      detail: "src/app/actions/auth.ts exports logout() but no component calls it. Requirement satisfied (action exists and redirects correctly), but developer has no example call site."
    - id: "DOCS-02"
      issue: "CLAUDE.md API route pattern uses Response.json() but actual code uses NextResponse.json()"
      severity: "non-critical"
      detail: "Documentation pattern diverges from template code. Both are valid approaches. next.config.ts standalone+transpilePackages also not documented in CLAUDE.md."
    - id: "DOCS-03"
      issue: "src/components/ directory referenced in docs but absent on disk"
      severity: "non-critical"
      detail: "Both CLAUDE.md and README.md list components/ in project structure with 'create as needed' note. Directory does not exist after fresh clone."
  flows:
    - flow: "Logout"
      issue: "Logout action exists but is unreachable from any UI element"
      severity: "non-critical"
      detail: "No form or button invokes the logout server action. Developers must wire it themselves with no template example."
tech_debt:
  - phase: 04-documentation
    items:
      - "CLAUDE.md uses Response.json() in API pattern but template uses NextResponse.json()"
      - "CLAUDE.md does not document next.config.ts (standalone output, transpilePackages)"
      - "src/components/ directory referenced in project structure but not created on disk"
  - phase: 03-app-code-cicd
    items:
      - "Logout server action has no template UI consumer (no example button/form)"
      - "CI/CD secrets.GITHUB_TOKEN may fail for cross-org package installs (documented risk, PAT fallback not configured)"
  - phase: all
    items:
      - "SUMMARY.md files lack requirements-completed frontmatter field (tooling convention gap)"
---

# Milestone v0.2 Audit Report

**Milestone:** MadeByKav App Template v2
**Audited:** 2026-02-25
**Status:** TECH DEBT (all requirements met, no critical blockers, accumulated minor items)

## Executive Summary

All 27 v1 requirements are satisfied with codebase evidence. All 4 phases passed verification. 5 of 6 E2E flows complete (logout flow has a soft gap — action exists but no UI wiring). No critical blockers. 7 tech debt items across documentation accuracy and template completeness.

## Requirements Coverage

### 3-Source Cross-Reference

| REQ-ID | Description | VERIFICATION.md | SUMMARY Frontmatter | REQUIREMENTS.md | Final Status |
|--------|-------------|-----------------|---------------------|-----------------|--------------|
| DEPS-01 | Update drizzle-orm to ^0.45.0 | SATISFIED | n/a | [x] | **satisfied** |
| DEPS-02 | Pin @madebykav/auth to ^0.2.0 | SATISFIED | n/a | [x] | **satisfied** |
| DEPS-03 | Pin @madebykav/db to ^0.1.0 | SATISFIED | n/a | [x] | **satisfied** |
| DEPS-04 | Pin @madebykav/ui to ^0.1.2 | SATISFIED | n/a | [x] | **satisfied** |
| DEPS-05 | Remove @madebykav/ai | SATISFIED | n/a | [x] | **satisfied** |
| DEPS-06 | Add output: 'standalone' | SATISFIED | n/a | [x] | **satisfied** |
| DEPS-07 | Remove @madebykav/ai from transpilePackages | SATISFIED | n/a | [x] | **satisfied** |
| SCHM-01 | Declarative RLS via pgPolicy() | SATISFIED | n/a | [x] | **satisfied** |
| SCHM-02 | Remove SDK re-exports from db/index.ts | SATISFIED | n/a | [x] | **satisfied** |
| SCHM-03 | Direct withTenant imports from @madebykav/db | SATISFIED | n/a | [x] | **satisfied** |
| APP-01 | Remove getAuthContext from root layout | SATISFIED | n/a | [x] | **satisfied** |
| APP-02 | Update page.tsx to AuthContext v0.2.0 | SATISFIED | n/a | [x] | **satisfied** |
| APP-03 | API route with satisfies NewExampleItem | SATISFIED | n/a | [x] | **satisfied** |
| APP-04 | @source directive in globals.css | SATISFIED | n/a | [x] | **satisfied** |
| APP-05 | Delete tailwind.config.ts | SATISFIED | n/a | [x] | **satisfied** |
| HLTH-01 | Liveness probe /api/health | SATISFIED | n/a | [x] | **satisfied** |
| HLTH-02 | Readiness probe /api/health/ready | SATISFIED | n/a | [x] | **satisfied** |
| AUTH-01 | Logout server action | SATISFIED | n/a | [x] | **satisfied** |
| DOCK-01 | Multi-stage Dockerfile | SATISFIED | n/a | [x] | **satisfied** |
| DOCK-02 | .dockerignore | SATISFIED | n/a | [x] | **satisfied** |
| DOCK-03 | docker-compose.yml dev postgres | SATISFIED | n/a | [x] | **satisfied** |
| DOCK-04 | dev.sh one-command setup | SATISFIED | n/a | [x] | **satisfied** |
| CICD-01 | GitHub Actions docker-publish.yml | SATISFIED | n/a | [x] | **satisfied** |
| DOCS-01 | .env.example with dev defaults | SATISFIED | n/a | [x] | **satisfied** |
| DOCS-02 | Rewrite CLAUDE.md | SATISFIED | n/a | [x] | **satisfied** |
| DOCS-03 | Rewrite README.md | SATISFIED | n/a | [x] | **satisfied** |
| DOCS-04 | Sonner/Toast specification brief | SATISFIED | n/a | [x] | **satisfied** |

**Score:** 27/27 requirements satisfied

**Note on SUMMARY frontmatter:** No SUMMARY.md files include a `requirements-completed` YAML field. The 2-source cross-reference (VERIFICATION.md + REQUIREMENTS.md traceability) provides sufficient evidence for all 27 requirements.

### Orphaned Requirements Check

No orphaned requirements. All 27 v1 requirements in the REQUIREMENTS.md traceability table are accounted for by at least one phase's VERIFICATION.md. Zero requirements assigned to phases but absent from all VERIFICATIONs.

## Phase Verification Summary

| Phase | Status | Score | Requirements | Tech Debt |
|-------|--------|-------|--------------|-----------|
| 1. Foundation | PASSED | 8/8 | 13/13 SATISFIED | None |
| 2. Docker & Health Probes | PASSED | 6/6 | 6/6 SATISFIED | None |
| 3. App Code & CI/CD | PASSED | 9/9 | 5/5 SATISFIED | Logout UI wiring, CI/CD token scope |
| 4. Documentation | PASSED | 14/14 | 3/3 SATISFIED | Doc accuracy items |

## Cross-Phase Integration

### Wiring Summary

- **Connected:** 24/27 requirements fully wired across phases
- **Partial wiring:** 3 requirements with non-critical gaps (AUTH-01, DOCS-02, DOCS-03)
- **Broken:** 0

### E2E Flow Results

| Flow | Status | Details |
|------|--------|---------|
| Clone-to-Running | COMPLETE | git clone → pnpm install → ./dev.sh → postgres → schema push → localhost:3000 |
| Auth | COMPLETE | Proxy headers → getAuthContext() → null check → auth fields rendered |
| Data | COMPLETE | Auth context → withTenant → RLS-protected query → response |
| Docker Build | COMPLETE | BuildKit secrets → multi-stage build → standalone → HEALTHCHECK |
| CI/CD | COMPLETE | push to main → GitHub Actions → docker build → GHCR (SHA + latest) |
| Logout | SOFT GAP | Action exists and redirects correctly; no UI element calls it |

### Integration Findings

**1. Logout action unreachable (AUTH-01)**
`src/app/actions/auth.ts` exports `logout()` but no component, page, or layout imports it. The action is correctly implemented (redirects to `${PLATFORM_URL}/logout`) but a developer cloning the template has no example showing `<form action={logout}>`. This is acceptable for a template — the action is a building block — but noted as a wiring gap.

**2. Documentation pattern divergence (DOCS-02)**
CLAUDE.md API route patterns use `Response.json()` (Web API) while the actual `api/example/route.ts` uses `NextResponse.json()` (Next.js). Both are valid. Additionally, `next.config.ts` (standalone output, transpilePackages) is not documented in CLAUDE.md.

**3. Missing components directory (DOCS-03)**
Both CLAUDE.md and README.md reference `src/components/` in project structure with "create as needed" annotation. The directory does not exist on disk after clone.

## Tech Debt Summary

### Phase 4: Documentation (3 items)
- CLAUDE.md uses `Response.json()` in API pattern but template code uses `NextResponse.json()`
- CLAUDE.md does not document `next.config.ts` (standalone output, transpilePackages)
- `src/components/` directory referenced in docs but not created on disk

### Phase 3: App Code & CI/CD (2 items)
- Logout server action has no template UI consumer (no example button/form)
- CI/CD `secrets.GITHUB_TOKEN` may fail for cross-org package installs (PAT fallback not configured)

### All Phases (1 item)
- SUMMARY.md files lack `requirements-completed` frontmatter field (tooling convention gap)

**Total: 6 items across 3 categories**

## Human Verification Items (from Phase VERIFICATIONs)

These items were flagged across all phases as requiring live runtime verification:

1. `pnpm install` succeeds in clean environment with GITHUB_TOKEN
2. `pnpm build` compiles Tailwind v4 correctly (visual check)
3. `pnpm db:push` applies declarative RLS policy correctly
4. `./dev.sh` end-to-end run (Docker + postgres + schema + dev server)
5. Health probe responses under real server
6. Docker build with BuildKit secret
7. GHCR push on actual git push to main
8. Unauthenticated "Not Authenticated" card rendering
9. Authenticated dashboard auth fields render

---

_Audited: 2026-02-25_
_Auditor: Claude (milestone audit orchestrator)_
